{
	"type": "LinearLayout",
	"orientation": "vertical",
	"gravity": "center_horizontal",
	"layout_width": "match_parent",
	"layout_height": "wrap_content",
	"component_list": [
		{
			"type": "x-JavaScript",
			"comment": "initialize the full path: concat home/working/selected directories",
			"script_list": [
				"//var home_dir = eigenFragment.getCacheString('HomeDirectory')",
				"//var work_dir = eigenFragment.getCacheString('WorkingDirectory')",
				"//var full_path = eigenFragment.concatPaths(home_dir, work_dir)",
				"//eigenFragment.setCacheString('FullPath', full_path)",
				"//eigenFragment.setViewState(6699, full_path)",
				"//eigenFragment.setCacheString('SelectedPath', '')",
				"//eigenFragment.setCacheString('SelectedFile', '')"
			]
		},
		{
			"type": "Clone",
			"name": "HorizontalLine"
		},
		{
			"type": "Clone",
			"name": "TextViewDetail",
			"attributes": {
				"text_script": "''+eigenFragment.getCacheString('FullPathFile')"
			}
		},
		{
			"type": "Clone",
			"name": "HorizontalLine"
		},
		{
			"type": "LinearLayout",
			"orientation": "horizontal",
			"layout_width": "match_parent",
			"component_list": [
				{
					"type": "Button",
					"text": "Open Parent Directory",
					"text_size": "14",
					"gravity": "center_horizontal",
					"text_color": "#ffffff",
					"background_color": "#123456",
					"layout_width": "match_parent",
					"layout_weight": "1",
					"margin": {
						"left": 10,
						"top": 10,
						"right": 10,
						"bottom": 10
					},
					"on_click": {
						"type": "ActionList",
						"component_list": [
							{
								"type": "JavaScript",
								"script_list": [
									"var selected_path = eigenFragment.getCacheString('SelectedPath')",
									"var lastIndex = selected_path.lastIndexOf('/')",
									"if (lastIndex > 0) selected_path = selected_path.substring(0, lastIndex)",
									"else selected_path = ''",
									"eigenFragment.setCacheString('SelectedPath', selected_path)",
									"eigenFragment.setCacheString('SelectedFile', '')",

									"var home_dir = eigenFragment.getCacheString('HomeDirectory')",
									"var work_dir = eigenFragment.getCacheString('WorkingDirectory')",
									"var full_path = eigenFragment.concatPaths(eigenFragment.concatPaths(home_dir, work_dir), selected_path)",
									"eigenFragment.setCacheString('FullPath', full_path)",
									"eigenFragment.setViewState(6699, full_path)",

									"eigenFragment.closePopupWindow()"
								]
							},
							{
								"type": "SecureFtp",
								"comment": "new full path, open directory",
								"id": 991004,
								"sftp_script": "'directory ' + eigenFragment.getCacheString('FullPath')",
								"on_complete": {
									"type": "PopupScreen",
									"layout_width": "match_parent",
									"layout_height": "wrap_content",
									"text_size": "14",
									"text_color": "#ffffff",
									"background_color": "#111111",
									"title": "Explore Filesystem (ListView)",
									"url": "https://raw.githubusercontent.com/jsawaya/eigenframe/master/web/frames/explore-filesystem-listview.json"
								}
							}
						]
					}
				},
				{
					"type": "Button",
					"text": "Select This Directory",
					"text_size": "14",
					"gravity": "center_horizontal",
					"text_color": "#ffffff",
					"background_color": "#123456",
					"layout_width": "match_parent",
					"layout_weight": "1",
					"margin": {
						"left": 10,
						"top": 10,
						"right": 10,
						"bottom": 10
					},
					"on_click": {
						"type": "ActionList",
						"component_list": [
							{
								"type": "JavaScript",
								"script_list": [
									"var full_path = eigenFragment.getCacheString('FullPath')",
									"eigenActivity.showToast('Directory: '+ full_path)",
									"eigenFragment.setCacheString('SelectedPath', '')",
									"eigenFragment.closePopupScreen(991005)",
									"eigenFragment.closePopupWindow()"
								]
							}
						]
					}
				}
			]
		},
		{
			"type": "LinearLayout",
			"orientation": "horizontal",
			"layout_width": "match_parent",
			"component_list": [
				{
					"type": "TextView",
					"text": "Sub-directories",
					"text_size": "14",
					"text_color": "#ffffff",
					"layout_width": "match_parent",
					"layout_weight": "1",
					"background_color": "#123456",
					"gravity": "center_horizontal",
					"font": "font/open-sans/OpenSans-SemiboldItalic.ttf"
				},
				{
					"type": "TextView",
					"text": "Files",
					"text_size": "14",
					"text_color": "#ffffff",
					"layout_width": "match_parent",
					"layout_weight": "1",
					"background_color": "#123456",
					"gravity": "center_horizontal",
					"font": "font/open-sans/OpenSans-SemiboldItalic.ttf"
				}
			]
		},
		{
			"type": "Clone",
			"name": "HorizontalLine"
		},
		{
			"type": "LinearLayout",
			"orientation": "horizontal",
			"layout_width": "match_parent",
			"layout_height": "wrap_content",
			"component_list": [
				{
					"type": "ListView",
					"layout_width": "match_parent",
					"layout_height": "match_parent",
					"layout_weight": "1",
					"background_color": "#123456",
					"cached_filename": "SecureFtp:991004",
					"dir_type": "subdir",
					"on_click": {
						"type": "ActionList",
						"component_list": [
							{
								"type": "JavaScript",
								"comment": "selected directory, append to selected path",
								"script_list": [
									"var selected_dir = eigenFragment.getOptionLabel()",
									"eigenActivity.showToast('selected directory: ' + selected_dir)",
									"var selected_path = eigenFragment.getCacheString('SelectedPath')",
									"selected_path = eigenFragment.concatPaths(selected_path, selected_dir)",
									"eigenFragment.setCacheString('SelectedPath', selected_path)",
									"var home_dir = eigenFragment.getCacheString('HomeDirectory')",
									"var work_dir = eigenFragment.getCacheString('WorkingDirectory')",
									"var full_path = eigenFragment.concatPaths(eigenFragment.concatPaths(home_dir, work_dir), selected_path)",
									"eigenFragment.setCacheString('FullPath', full_path)",
									"eigenFragment.setCacheString('FullPathFile', full_path)",
									"eigenFragment.setViewState(6699, full_path)",

									"eigenFragment.closePopupWindow()"
								]
							},
							{
								"type": "SecureFtp",
								"comment": "call sftp this way when you don't need immediate results for a TextView",
								"id": 991004,
								"sftp_script": "'directory ' +  eigenFragment.getCacheString('FullPath')",
								"on_complete": {
									"type": "PopupScreen",
									"layout_width": "match_parent",
									"layout_height": "wrap_content",
									"text_size": "14",
									"text_color": "#ffffff",
									"background_color": "#111111",
									"title": "Explore Filesystem (ListView)",
									"url": "https://raw.githubusercontent.com/jsawaya/eigenframe/master/web/frames/explore-filesystem-listview.json"
								}
							}
						]
					},
					"item_layout": {
						"type": "LinearLayout",
						"orientation": "horizontal",
						"layout_width": "wrap_content",
						"layout_height": "wrap_content",
						"gravity": "center_vertical",
						"component_list": [
							{
								"type": "TextView",
								"text_script": "eigenFragment.getOptionPosition() + ': ' + eigenFragment.getOptionLabel()",
								"text_color": "#ffffff",
								"background_color": "#123456",
								"margin": {
									"left": 40,
									"top": 40,
									"right": 40,
									"bottom": 40
								}
							}
						]
					}
				},
				{
					"type": "Clone",
					"name": "VerticalLine"
				},
				{
					"type": "ListView",
					"layout_width": "match_parent",
					"layout_height": "match_parent",
					"layout_weight": "1",
					"background_color": "#123456",
					"cached_filename": "SecureFtp:991004",
					"dir_type": "files",
					"on_click": {
						"type": "ActionList",
						"component_list": [
							{
								"type": "JavaScript",
								"comment": [
									"selected_file: file name selected by the user",
									"full_path: /home/git-repo/git-path",
									"full_path += selected_file"
								],
								"script_list": [
									"var selected_file = eigenFragment.getOptionLabel()",
									"eigenActivity.showToast('selected filename: ' + selected_file)",
									"eigenFragment.setCacheString('SelectedFile', selected_file)",
									"var full_path = eigenFragment.getCacheString('FullPath')",
									"var full_path_file = eigenFragment.concatPaths(full_path, selected_file)",
									"eigenFragment.setCacheString('FullPathFile', full_path_file)",
									"eigenFragment.setViewState(6699, full_path_file)",
									"eigenFragment.closePopupScreen(991005)",
									"eigenFragment.closePopupWindow()"
								]
							}
						]
					},
					"item_layout": {
						"type": "LinearLayout",
						"orientation": "horizontal",
						"layout_width": "wrap_content",
						"layout_height": "wrap_content",
						"gravity": "center_vertical",
						"component_list": [
							{
								"type": "TextView",
								"text_script": "eigenFragment.getOptionPosition() + ': ' + eigenFragment.getOptionLabel()",
								"text_color": "#ffffff",
								"background_color": "#123456",
								"margin": {
									"left": 40,
									"top": 40,
									"right": 40,
									"bottom": 40
								}
							}
						]
					}
				}
			]
		}
	]
}
