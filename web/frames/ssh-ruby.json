{
  "comment": "set the HomeDirectory from sftp pwd",
  "type": "SecureFtp",
  "id": 411000,
  "sftp": "pwd",
  "on_complete": {
    "type": "ActionList",
    "component_list": [
      {
        "type": "LinearLayout",
        "condition_script": "!eigenFragment.getCacheString('SecureFtp',411000,'') ",
        "orientation": "vertical",
        "gravity": "center_horizontal",
        "layout_width": "match_parent",
        "component_list": [
          {
            "type": "TextView",
            "layout_width": "match_parent",
            "layout_height": "match_parent",
            "text_size": "14",
            "text_color": "#ffffff",
            "text_list": [
              "SecureShell (ssh) is not enabled.\n",
              "Open Termux, enter:  sshd"
            ]
          }
        ]
      },
      {
        "type": "LinearLayout",
        "condition_script": "!!eigenFragment.getCacheString('SecureFtp',411000,'') ",
        "scrollable": true,
        "orientation": "vertical",
        "gravity": "center_horizontal",
        "layout_width": "match_parent",
        "layout_height": "wrap_content",
        "component_list": [
          {
            "type": "Clone",
            "name": "TextViewLabel",
            "attributes": {
              "text": "Launch dynamic ruby apps using ssh"
            }
          },
          {
            "type": "Clone",
            "name": "TextViewDetail",
            "attributes": {
              "text_list": [
                "These methods use ssh to invoke Ruby",
                " - which may return plain text (default)",
                " - or may return dynamic EigenFrame components (is_eigen_response: true)"
              ]
            }
          },
          {
            "type": "Clone",
            "name": "HorizontalLine"
          },
          {
            "type": "Clone",
            "name": "TextViewLabel",
            "attributes": {
              "text": "Ruby Command Console"
            }
          },
          {
            "type": "Clone",
            "name": "TextViewDetail",
            "attributes": {
              "text_list": [
                "Enter ruby command",
                "example: EigenFrame.new().eigen_directory_listview_ssh('.').to_json.to_s"
              ]
            }
          },
          {
            "type": "EditText",
            "id": 7700,
            "layout_width": "match_parent",
            "layout_height": "wrap_content",
            "text": "EigenFrame.new().eigen_directory_listview_ssh('.').to_json.to_s",
            "text_color": "#ffffff",
            "background_color": "#11ff0000"
          },
          {
            "type": "Clone",
            "name": "TextViewDetail",
            "attributes": {
              "text": "Click [Execute Ruby Command] to execute the ruby command and return the result as plain text"
            }
          },
          {
            "type": "Clone",
            "name": "ButtonDefault",
            "attributes": {
              "text": "Execute Ruby Command",
              "icon": {
                "name": "play.",
                "location": "top"
              },
              "on_click": {
                "type": "Clone",
                "name": "PopupScreenDefault",
                "attributes": {
                  "title": "Ruby Command Output",
                  "component_list": [
                    {
                      "type": "Clone",
                      "name": "LayoutVerticalScrollable",
                      "attributes": {
                        "component_list": [
                          {
                            "type": "Clone",
                            "name": "TextViewDetail",
                            "attributes": {
                              "text_size": "10",
                              "ssh_script": "'cd /data/data/com.termux/files/home/git-repos/eigenframe/cgi-bin; ruby ssh_ruby.rb \"'+ eigenFragment.getViewState(7700) +'\"'"
                            }
                          }
                        ]
                      }
                    }
                  ]
                }
              }
            }
          },
          {
            "type": "Clone",
            "name": "TextViewDetail",
            "attributes": {
              "text": "Click [Execute Ruby EigenFrame] to execute the ruby command and return the result as an EigenFrame component"
            }
          },
          {
            "type": "Clone",
            "name": "ButtonDefault",
            "attributes": {
              "text": "Execute Ruby EigenFrame",
              "icon": {
                "name": "play.",
                "location": "top"
              },
              "on_click": {
                "type": "Clone",
                "name": "PopupScreenDefault",
                "attributes": {
                  "title": "Ruby Produced EigenFrame",
                  "component_list": [
                    {
                      "type": "LinearLayout",
                      "orientation": "vertical",
                      "gravity": "center",
                      "layout_width": "match_parent",
                      "layout_height": "match_parent",
                      "component_list": [
                        {
                          "type": "SecureShell",
                          "is_eigen_response": true,
                          "ssh_script": "'cd /data/data/com.termux/files/home/git-repos/eigenframe/cgi-bin; ruby ssh_ruby.rb \"'+ eigenFragment.getViewState(7700) +'\"'"
                        }
                      ]
                    }
                  ]
                }
              }
            }
          },
          {
            "type": "Clone",
            "name": "HorizontalLine"
          },
          {
            "type": "Clone",
            "name": "TextViewLabel",
            "attributes": {
              "text": "Ruby EigenFrame Gallery"
            }
          },
          {
            "type": "Button",
            "gravity": "center",
            "layout_width": "match_parent",
            "layout_height": "wrap_content",
            "text": "File System Explorer (via ssh)",
            "text_color": "#ffffff",
            "background_color": "#123456",
            "icon": {
              "name": "open_browser.",
              "location": "top"
            },
            "margin": {
              "left": 10,
              "top": 10,
              "right": 10,
              "bottom": 10
            },
            "on_click": {
              "type": "PopupScreen",
              "layout_width": "match_parent",
              "layout_height": "wrap_content",
              "text_size": "14",
              "text_color": "#ffffff",
              "background_color": "#111111",
              "title": "File system explorer",
              "icon": {
                "name": "info.",
                "location": "left"
              },
              "component_list": [
                {
                  "type": "TextView",
                  "layout_width": "match_parent",
                  "layout_height": "wrap_content",
                  "text": "SecureShell calls ruby to generate the following components:",
                  "text_size": "14",
                  "gravity": "left",
                  "text_color": "#ffffff"
                },
                {
                  "type": "SecureShell",
                  "is_eigen_response": true,
                  "ssh_list": [
                    "cd /data/data/com.termux/files/home/git-repos/eigenframe/cgi-bin",
                    "ruby ssh-directory-listview.rb /data/data/com.termux/files/home"
                  ]
                }
              ]
            }
          },
          {
            "type": "Clone",
            "name": "HorizontalLine"
          },
          {
            "type": "Clone",
            "name": "TextViewLabel",
            "attributes": {
              "text": "Ruby HTTP service (webrick)"
            }
          },
          {
            "type": "Clone",
            "name": "TextViewDetail",
            "attributes": {
              "text_list": [
                "Ruby can be used as a simple http server:",
                " - best for very quick light-weight ruby methods",
                " - not as robust as Apache2 (multi-threading, etc.)"
              ]
            }
          },
          {
            "type": "Button",
            "layout_width": "wrap_content",
            "layout_height": "wrap_content",
            "text": "Start ruby webrick service",
            "text_color": "#ffffff",
            "background_color": "#123456",
            "margin": {
              "left": 10,
              "top": 10,
              "right": 10,
              "bottom": 10
            },
            "on_click": {
              "type": "PopupTextView",
              "title": "Start ruby webrick",
              "font": "font/droid-sans-mono/DroidSansMono.ttf",
              "abort": 2000,
              "ssh": "ruby /data/data/com.termux/files/home/git-repos/eigenframe/cgi-bin/sys-webrick.rb > ruby-webrick.out 2> ruby-webrick.log &"
            }
          },
          {
            "type": "Button",
            "layout_width": "wrap_content",
            "layout_height": "wrap_content",
            "text": "Confirm ruby webrick process",
            "text_color": "#ffffff",
            "background_color": "#123456",
            "icon": {
              "name": "info.",
              "location": "top"
            },
            "margin": {
              "left": 10,
              "top": 10,
              "right": 10,
              "bottom": 10
            },
            "on_click": {
              "type": "PopupTextView",
              "title": "Confirm ruby webrick process",
              "font": "font/droid-sans-mono/DroidSansMono.ttf",
              "ssh": "ps -eo cmd | grep -n 'ruby' | grep -v 'grep'"
            }
          },
          {
            "type": "Button",
            "layout_width": "wrap_content",
            "layout_height": "wrap_content",
            "text": "Test ruby webrick service",
            "text_color": "#ffffff",
            "background_color": "#123456",
            "icon": {
              "name": "open_browser.",
              "location": "top"
            },
            "margin": {
              "left": 10,
              "top": 10,
              "right": 10,
              "bottom": 10
            },
            "on_click": {
              "type": "PopupTextView",
              "title": "http://localhost:1234/test",
              "url": "http://localhost:1234/test"
            }
          },
          {
            "type": "Button",
            "layout_width": "wrap_content",
            "layout_height": "wrap_content",
            "text": "Show ruby webrick log",
            "text_color": "#ffffff",
            "background_color": "#123456",
            "margin": {
              "left": 10,
              "top": 10,
              "right": 10,
              "bottom": 10
            },
            "on_click": {
              "type": "PopupTextView",
              "title": "Show ruby webrick log",
              "font": "font/droid-sans-mono/DroidSansMono.ttf",
              "ssh": "cd /data/data/com.termux/files/home/git-repos/eigenframe/cgi-bin; ruby list-termux-file-contents.rb /data/data/com.termux/files/home/ruby-webrick.log"
            }
          },
          {
            "type": "Button",
            "layout_width": "wrap_content",
            "layout_height": "wrap_content",
            "text": "Show ruby webrick output",
            "text_color": "#ffffff",
            "background_color": "#123456",
            "margin": {
              "left": 10,
              "top": 10,
              "right": 10,
              "bottom": 10
            },
            "on_click": {
              "type": "PopupTextView",
              "title": "Show ruby webrick output",
              "font": "font/droid-sans-mono/DroidSansMono.ttf",
              "ssh": "cd /data/data/com.termux/files/home/git-repos/eigenframe/cgi-bin; ruby list-termux-file-contents.rb /data/data/com.termux/files/home/ruby-webrick.out"
            }
          },
          {
            "type": "Button",
            "layout_width": "wrap_content",
            "layout_height": "wrap_content",
            "text": "Use url to exit webrick process",
            "text_color": "#ffffff",
            "background_color": "#123456",
            "margin": {
              "left": 10,
              "top": 10,
              "right": 10,
              "bottom": 10
            },
            "on_click": {
              "type": "PopupTextView",
              "title": "Use url to exit webrick process",
              "url": "http://localhost:1234/exit"
            }
          },
          {
            "type": "Button",
            "layout_width": "wrap_content",
            "layout_height": "wrap_content",
            "text": "Use ssh to stop any ruby process",
            "text_color": "#ffffff",
            "background_color": "#123456",
            "margin": {
              "left": 10,
              "top": 10,
              "right": 10,
              "bottom": 10
            },
            "on_click": {
              "type": "PopupTextView",
              "title": "use ssh to stop any ruby process",
              "font": "font/droid-sans-mono/DroidSansMono.ttf",
              "ssh_list": [
                "pkill ruby",
                "ps -eo cmd"
              ]
            }
          }
        ]
      }
    ]
  }
}