{
	"type": "ActionList",
	"component_list": [
		{
			"type": "JavaScript",
			"comment": [
				"Set root_url for github branch: remember to include the trailing '/' ",
				"https://raw.githubusercontent.com/jsawaya/eigenframe/master/web/",
				"https://raw.githubusercontent.com/jsawaya/eigenframe/beta/web/",
				"https://raw.githubusercontent.com/jsawaya/eigenframe/test/web/"
			],
			"script_list": [
				"var github_branch = 'beta'",
				"eigenFragment.setCacheString('GithubBranch', github_branch)",
				"var root_url = 'https://raw.githubusercontent.com/jsawaya/eigenframe/'+github_branch+'/web/'",
				"eigenFragment.setCacheString('RootUrl', root_url)"
			]
		},
		{
			"type": "Define",
			"name": "HorizontalLine",
			"component": {
				"type": "HorizontalLine",
				"size": 3,
				"color": "#666666"
			}
		},
		{
			"type": "Define",
			"name": "VerticalLine",
			"component": {
				"type": "VerticalLine",
				"size": 3,
				"color": "#666666"
			}
		},
		{
			"type": "Define",
			"name": "TextViewLabel",
			"component": {
				"type": "TextView",
				"layout_width": "match_parent",
				"gravity": "left",
				"text_color": "#8aec81",
				"text_size": "22"
			}
		},
		{
			"type": "Define",
			"name": "TextViewDetail",
			"component": {
				"type": "TextView",
				"layout_width": "match_parent",
				"gravity": "left",
				"font": "font/droid-sans-mono/DroidSansMono.ttf",
				"text_color": "#ffffff",
				"text_size": "14"
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenDefault",
			"component": {
				"type": "PopupScreen",
				"layout_width": "match_parent",
				"text_size": "14",
				"text_color": "#ffffff",
				"background_color": "#222222"
			}
		},
		{
			"type": "Define",
			"name": "ButtonDefault",
			"component": {
				"type": "Button",
				"text_color": "#ffffff",
				"background_color": "#654321",
				"gravity": "center",
				"layout_width": "match_parent",
				"margin": {
					"left": 10,
					"top": 10,
					"right": 10,
					"bottom": 10
				}
			}
		},
		{
			"type": "Define",
			"name": "LayoutVertical",
			"component": {
				"type": "LinearLayout",
				"orientation": "vertical",
				"gravity": "center_horizontal",
				"layout_width": "match_parent"
			}
		},
		{
			"type": "Define",
			"name": "LayoutVerticalScrollable",
			"component": {
				"type": "LinearLayout",
				"scrollable": true,
				"orientation": "vertical",
				"gravity": "center_horizontal",
				"layout_width": "match_parent"
			}
		},
		{
			"type": "Define",
			"name": "LayoutHorizontalScrollable",
			"component": {
				"type": "LinearLayout",
				"scrollable": true,
				"orientation": "horizontal",
				"gravity": "center_vertical",
				"layout_width": "match_parent"
			}
		},
		{
			"type": "Define",
			"name": "EditTextLocalFileCache",
			"component": {
				"type": "EditText",
				"url_script": "'file://' + eigenFragment.getCacheFilePath('EditText:999000') ",
				"id": 999000,
				"gravity": "left",
				"layout_width": "match_parent",
				"text_color": "#ffffff",
				"background_color": "#000000"
			}
		},
		{
			"type": "Define",
			"name": "ButtonSaveEditsToRemoteFile",
			"component": {
				"type": "Clone",
				"name": "ButtonDefault",
				"attributes": {
					"text": "Save Edits to Remote File",
					"icon": {
						"name": "save.",
						"location": "top"
					},
					"on_click": {
						"type": "SecureFtp",
						"sftp_script_list": [
							"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
							"var filename = eigenFragment.getViewState(targetVid)",
							"'put EditText:999000 ' + filename"
						],
						"on_complete": {
							"type": "JavaScript",
							"script_list": [
								"var x1 = eigenFragment.clearCacheFile('EditText:999000')",
								"eigenActivity.showToast('Local File Cache Status: ' + x1 )",
								"eigenFragment.closePopupScreen(999099)"
							]
						}
					}
				}
			}
		},
		{
			"type": "Define",
			"name": "ButtonCancelLocalEdits",
			"component": {
				"type": "Clone",
				"name": "ButtonDefault",
				"attributes": {
					"text": "Cancel Local Edits",
					"icon": {
						"name": "cancel.",
						"location": "top"
					},
					"on_click": {
						"type": "JavaScript",
						"script_list": [
							"var x1 = eigenFragment.clearCacheFile('EditText:999000')",
							"eigenActivity.showToast('EditText Cache: ' + x1 )",
							"eigenFragment.closePopupScreen(999099)"
						]
					}
				}
			}
		},
		{
			"type": "Define",
			"name": "ButtonExecuteRuby",
			"component": {
				"type": "Clone",
				"name": "ButtonDefault",
				"attributes": {
					"text": "Execute Ruby",
					"icon": {
						"name": "play.",
						"location": "top"
					},
					"on_click": {
						"type": "SecureFtp",
						"sftp_script_list": [
							"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
							"var filename = eigenFragment.getViewState(targetVid)",
							"'put EditText:999000 ' + filename"
						],
						"on_complete": {
							"type": "Clone",
							"name": "PopupScreenDefault",
							"attributes": {
								"title": "Ruby Command Output",
								"component_list": [
									{
										"type": "Clone",
										"name": "LayoutVerticalScrollable",
										"attributes": {
											"component_list": [
												{
													"type": "Clone",
													"name": "TextViewDetail",
													"attributes": {
														"text_size": "10",
														"ssh_script_list": [
															"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
															"var filename = eigenFragment.getViewState(targetVid)",
															"'cd /data/data/com.termux/files/home; ruby '+filename "
														]
													}
												}
											]
										}
									}
								]
							}
						}
					}
				}
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenEdit",
			"component": {
				"type": "Clone",
				"name": "PopupScreenDefault",
				"attributes": {
					"id": 999099,
					"title_script_list": [
						"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
						"var filename = eigenFragment.getViewState(targetVid)",
						"'Remote File: ' + filename"
					],
					"component_list": [
						{
							"type": "Clone",
							"name": "LayoutVerticalScrollable",
							"attributes": {
								"component_list": [
									{
										"type": "Clone",
										"name": "ButtonSaveEditsToRemoteFile"
									},
									{
										"type": "Clone",
										"name": "ButtonExecuteRuby"
									},
									{
										"type": "Clone",
										"name": "ButtonCancelLocalEdits"
									},
									{
										"type": "Clone",
										"name": "EditTextLocalFileCache"
									}
								]
							}
						}
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenShowRemoteFile",
			"component": {
				"type": "Clone",
				"name": "PopupScreenDefault",
				"attributes": {
					"title_script_list": [
						"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
						"var filename = eigenFragment.getViewState(targetVid)",
						"'Remote File: '+filename"
					],
					"component_list": [
						{
							"type": "Clone",
							"name": "LayoutVerticalScrollable",
							"attributes": {
								"component_list": [
									{
										"type": "Clone",
										"name": "TextViewDetail",
										"attributes": {
											"ssh_script_list": [
												"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
												"var filename = eigenFragment.getViewState(targetVid)",
												"'cat ' + filename"
											]
										}
									}
								]
							}
						}
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenEditRemoteFile",
			"component": {
				"type": "SecureFtp",
				"sftp_script_list": [
					"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
					"var filename = eigenFragment.getViewState(targetVid)",
					"'get ' + filename + ' EditText:999000'"
				],
				"on_complete": {
					"type": "Clone",
					"name": "PopupScreenEdit"
				}
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenImage",
			"component": {
				"type": "Clone",
				"name": "PopupScreenDefault",
				"attributes": {
					"title_script_list": [
						"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
						"var filename = eigenFragment.getViewState(targetVid)",
						"'Remote Image: '+filename"
					],
					"component_list": [
						{
							"type": "Clone",
							"name": "LayoutVerticalScrollable",
							"attributes": {
								"component_list": [
									{
										"type": "ImageView",
										"url_script": "'file://'+ eigenFragment.getCacheFilePath('ImageView.png')",
										"layout_width": "match_parent",
										"layout_height": "match_parent",
										"background_color": "#123456",
										"on_click": {
											"type": "JavaScript",
											"script": "eigenActivity.showToast('image click eigenframe')"
										}
									}
								]
							}
						}
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenImageRemoteFile",
			"component": {
				"type": "SecureFtp",
				"sftp_script_list": [
					"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 0)",
					"var filename = eigenFragment.getViewState(targetVid)",
					"'get ' + filename + ' ImageView.png'"
				],
				"on_complete": {
					"type": "Clone",
					"name": "PopupScreenImage"
				}
			}
		},
		{
			"type": "Define",
			"name": "SetIsSourceButton",
			"component": {
				"type": "Switch",
				"id": 999300,
				"text": "Enable Source Button",
				"checked_script": "eigenFragment.getBooleanVariable('IsSourceButton', 0, true)",
				"text_color": "#ffffff",
				"background_color": "#654321",
				"icon": {
					"name": "pageview.",
					"location": "top"
				},
				"margin": {
					"left": 10,
					"top": 10,
					"right": 10,
					"bottom": 10
				},
				"padding": {
					"left": 30,
					"top": 30,
					"right": 30,
					"bottom": 30
				},
				"on_click": {
					"type": "JavaScript",
					"script_list": [
						"var b1 = eigenFragment.getViewState(999300) == 1",
						"eigenFragment.setBooleanVariable('IsSourceButton', 0, b1)",
						"eigenActivity.showToast('IsSourceButton: ' + b1)",
						"eigenActivity.finish()",
						"eigenActivity.launch('file:///storage/emulated/0/Android/data/com.sawaya.eigenframe/files/app.json')"
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "SetIsMasterBranchButton",
			"component": {
				"type": "ToggleButton",
				"id": 999200,
				"checked": true,
				"text_on": "Master",
				"text_off": "Beta",
				"text_color": "#ffffff",
				"background_color": "#654321",
				"margin": {
					"left": 10,
					"top": 10,
					"right": 10,
					"bottom": 10
				},
				"on_click": {
					"type": "JavaScript",
					"comment_list": [
						"eigenActivity.showToast('ToggleButton getViewState: '+eigenFragment.getViewState(999200))",
						"eigenFragment.setBooleanVariable('IsMasterBranch', 0, b1)",
						"eigenActivity.showToast('IsMasterBranch: ' + b1)",
						"eigenActivity.finish()",
						"eigenActivity.launch('file:///storage/emulated/0/Android/data/com.sawaya.eigenframe/files/app.json')"
					],
					"script_list": [
						"var b1 = eigenFragment.getViewState(999200) == 1",
						"if (b1) eigenFragment.setCacheString('GithubBranch', 'master')",
						"else eigenFragment.setCacheString('GithubBranch', 'beta')",
						"eigenActivity.showToast('GithubBranch: ' + eigenFragment.getCacheString('GithubBranch') )"
					]
				}
			}
		},
		{
			"type": "JavaScript",
			"script": "eigenFragment.setCacheString('SelectFilePrompt', 0, 'Select File...')"
		},
		{
			"type": "Define",
			"name": "JavaScriptSetFullPath",
			"component": {
				"type": "JavaScript",
				"script_list": [
					"var work_dir = eigenFragment.getCacheString('WorkingDirectory', 0, '')",
					"var selected_path = eigenFragment.getCacheString('SelectedPath', 0, '')",
					"var selected_file = eigenFragment.getCacheString('SelectedFile', 0, '')",
					"var home_dir = eigenFragment.getCacheString('SecureFtp:411000')",
					"eigenFragment.setCacheString('HomeDirectory', home_dir)",
					"var full_path = eigenFragment.concatPaths(home_dir, work_dir, selected_path)",
					"eigenFragment.setCacheString('FullPath', full_path)",
					"var targetVid = eigenFragment.getIntegerVariable('TargetViewId', 0, 6699)",
					"eigenFragment.setViewState(targetVid, full_path)"
				]
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenSelectFilePath",
			"component": {
				"type": "Clone",
				"name": "PopupScreenDefault",
				"attributes": {
					"id": 991005,
					"title_script": "''+eigenFragment.getCacheString('SelectFilePrompt')",
					"url_script": "eigenFragment.getCacheString('RootUrl')+'frames/select-filepath.json'"
				}
			}
		},
		{
			"type": "Define",
			"name": "JavaScriptSelectFilePath",
			"component": {
				"type": "Clone",
				"name": "LayoutVerticalScrollable",
				"attributes": {
					"component_list": [
						{
							"type": "Clone",
							"name": "HorizontalLine"
						},
						{
							"type": "Clone",
							"name": "TextViewLabel",
							"attributes": {
								"text_script": "''+eigenFragment.getCacheString('SelectFilePrompt')"
							}
						},
						{
							"type": "EditText",
							"id": 6699,
							"max_length": 200,
							"is_single_line": true,
							"layout_width": "match_parent",
							"text_color": "#ffffff",
							"background_color": "#000000"
						},
						{
							"type": "Clone",
							"name": "ButtonDefault",
							"attributes": {
								"text_script": "''+eigenFragment.getCacheString('SelectFilePrompt')",
								"icon": {
									"name": "open_with.",
									"location": "top"
								},
								"on_click": {
									"type": "ActionList",
									"component_list": [
										{
											"type": "JavaScript",
											"script": "eigenFragment.setIntegerVariable('TargetViewId', 0, 6699)"
										},
										{
											"type": "Clone",
											"name": "JavaScriptSetFullPath"
										},
										{
											"type": "JavaScript",
											"script_list": [
												"eigenFragment.setBooleanVariable('IsShowWorkingDirectory',0,true)",
												"eigenFragment.setBooleanVariable('IsShowCurrentFilename',0,true)"
											]
										},
										{
											"type": "Clone",
											"name": "PopupScreenSelectFilePath"
										}
									]
								}
							}
						},
						{
							"type": "Clone",
							"name": "HorizontalLine"
						}
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "EditTextPgpPassword6606",
			"component": {
				"type": "Clone",
				"name": "LayoutVerticalScrollable",
				"attributes": {
					"component_list": [
						{
							"type": "Clone",
							"name": "HorizontalLine"
						},
						{
							"type": "Clone",
							"name": "TextViewLabel",
							"attributes": {
								"text": "Private Key Passphrase:"
							}
						},
						{
							"type": "EditText",
							"id": 6606,
							"is_password": true,
							"layout_width": "match_parent",
							"layout_height": "wrap_content",
							"text_color": "#ffffff",
							"background_color": "#000000",
							"text": "password"
						},
						{
							"type": "Clone",
							"name": "HorizontalLine"
						}
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenCameraImage",
			"component": {
				"type": "Clone",
				"name": "PopupScreenDefault",
				"attributes": {
					"title_script_list": [
						"var jpg_filename = eigenFragment.getCacheString('CameraImage')",
						"'Camera Image: '+jpg_filename"
					],
					"component_list": [
						{
							"type": "Clone",
							"name": "LayoutVertical",
							"attributes": {
								"component_list": [
									{
										"type": "ImageView",
										"rotation": 90,
										"url_script_list": [
											"var jpg_filename = eigenFragment.getCacheString('CameraImage')",
											"'file://'+jpg_filename"
										],
										"layout_width": "match_parent",
										"layout_height": "match_parent",
										"background_color": "#123456",
										"on_click": {
											"type": "JavaScript",
											"script": "eigenActivity.showToast('image click eigenframe')"
										}
									}
								]
							}
						}
					]
				}
			}
		}
	],
	"on_complete": {
		"type": "UrlRequest",
		"is_eigen_response": true,
		"url_script": "eigenFragment.getCacheString('RootUrl')+'frames/playlist.json'"
	}
}


