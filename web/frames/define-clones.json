{
	"type": "ActionList",
	"component_list": [
		{
			"type": "JavaScript",
			"comment": [
				"Initialize cache (GithubBranch)",
				" - get cache string (GithubBranch), if empty then initialize to 'master' ",
				" - set cache string (GithubBranch), initialized or left unchanged "
			],
			"script_list": [
				"var github_branch = eigenFragment.getCacheString('GithubBranch', 0, 'master')",
				"eigenFragment.setCacheString('GithubBranch', github_branch)"
			]
		},
		{
			"type": "JavaScript",
			"comment": [
				"get cache string (GithubBranch) ",
				"Set root_url for github branch: remember to include the trailing '/' ",
				"https://raw.githubusercontent.com/jsawaya/eigenframe/master/web/",
				"https://raw.githubusercontent.com/jsawaya/eigenframe/beta/web/"
			],
			"script_list": [
				"github_branch = eigenFragment.getCacheString('GithubBranch')",
				"var root_url = 'https://raw.githubusercontent.com/jsawaya/eigenframe/'+github_branch+'/web/'",
				"eigenFragment.setCacheString('RootUrl', root_url)"
			]
		},
		{
			"type": "Define",
			"name": "HorizontalLine",
			"component": {
				"type": "HorizontalLine",
				"size": 3,
				"color": "#666666"
			}
		},
		{
			"type": "Define",
			"name": "VerticalLine",
			"component": {
				"type": "VerticalLine",
				"size": 3,
				"color": "#666666"
			}
		},
		{
			"type": "Define",
			"name": "TextViewLabel",
			"component": {
				"type": "TextView",
				"layout_width": "match_parent",
				"gravity": "left",
				"text_color": "#8aec81",
				"text_size": "22"
			}
		},
		{
			"type": "Define",
			"name": "TextViewDetail",
			"component": {
				"type": "TextView",
				"layout_width": "match_parent",
				"gravity": "left",
				"font": "font/droid-sans-mono/DroidSansMono.ttf",
				"text_color": "#ffffff",
				"text_size": "14"
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenDefault",
			"component": {
				"type": "PopupScreen",
				"layout_width": "match_parent",
				"text_size": "14",
				"text_color": "#ffffff",
				"background_color": "#222222"
			}
		},
		{
			"type": "Define",
			"name": "ButtonDefault",
			"component": {
				"type": "Button",
				"text_color": "#ffffff",
				"background_color": "#654321",
				"gravity": "center",
				"layout_width": "match_parent",
				"margin": {
					"left": 10,
					"top": 10,
					"right": 10,
					"bottom": 10
				}
			}
		},
		{
			"type": "Define",
			"name": "LayoutVertical",
			"component": {
				"type": "LinearLayout",
				"orientation": "vertical",
				"gravity": "center_horizontal",
				"layout_width": "match_parent"
			}
		},
		{
			"type": "Define",
			"name": "LayoutVerticalScrollable",
			"component": {
				"type": "LinearLayout",
				"scrollable": true,
				"orientation": "vertical",
				"gravity": "center_horizontal",
				"layout_width": "match_parent"
			}
		},
		{
			"type": "Define",
			"name": "LayoutHorizontalScrollable",
			"component": {
				"type": "LinearLayout",
				"scrollable": true,
				"orientation": "horizontal",
				"gravity": "center_vertical",
				"layout_width": "match_parent"
			}
		},
		{
			"type": "Define",
			"name": "EditTextLocalFileCache",
			"component": {
				"type": "EditText",
				"url_script": "'file://' + eigenFragment.getCacheFilePath('EditText:999000') ",
				"id": 999000,
				"gravity": "left",
				"layout_width": "match_parent",
				"text_color": "#ffffff",
				"background_color": "#000000"
			}
		},
		{
			"type": "Define",
			"name": "ButtonSaveEditsToRemoteFile",
			"component": {
				"type": "Clone",
				"name": "ButtonDefault",
				"attributes": {
					"text": "Save Edits to Remote File",
					"icon": {
						"name": "save.",
						"location": "top"
					},
					"on_click": {
						"type": "SecureFtp",
						"sftp_script_list": [
							"var targetVid = eigenFragment.getIntegerVariable('TargetViewId')",
							"var filename = eigenFragment.getViewState(targetVid)",
							"'put EditText:999000 ' + filename"
						],
						"on_complete": {
							"type": "JavaScript",
							"script_list": [
								"eigenFragment.clearCacheFile('EditText:999000')",
								"eigenFragment.closePopupScreen(999099)"
							]
						}
					}
				}
			}
		},
		{
			"type": "Define",
			"name": "GetRemoteFilePopupScreenEditProlog",
			"component": {
				"type": "SecureFtp",
				"sftp_script_list": [
					"var targetVid = eigenFragment.getIntegerVariable('TargetViewId')",
					"var filename = eigenFragment.getViewState(targetVid)",
					"'get ' + filename + ' EditText:999000'"
				],
				"on_complete": {
					"type": "Clone",
					"name": "PopupScreenDefault",
					"attributes": {
						"id": 999099,
						"title_script_list": [
							"var targetVid = eigenFragment.getIntegerVariable('TargetViewId')",
							"var filename = eigenFragment.getViewState(targetVid)",
							"'Remote File: ' + filename"
						],
						"component_list": [
							{
								"type": "Clone",
								"name": "LayoutVerticalScrollable",
								"attributes": {
									"component_list": [
										{
											"type": "Clone",
											"name": "ButtonSaveEditsToRemoteFile"
										},
										{
											"type": "Clone",
											"name": "HorizontalLine"
										},
										{
											"type": "Clone",
											"name": "TextViewLabel",
											"attributes": {
												"text": "Prolog Proposition (Goal):"
											}
										},
										{
											"type": "EditText",
											"id": 976000,
											"text": "undefined",
											"layout_width": "match_parent",
											"layout_height": "wrap_content",
											"text_color": "#ffffff",
											"background_color": "#000000"
										},
										{
											"x-type": "JavaScript",
											"script_list": [
												"var initial_value = eigenFragment.getCacheString('EditText:976000')",
												"if (!initial_value) eigenFragment.setViewState('EditText:976000', 'goal(X)')"
											]
										},
										{
											"type": "Clone",
											"name": "ButtonDefault",
											"attributes": {
												"text": "Execute Inference Engine",
												"icon": {
													"name": "open_browser.",
													"location": "top"
												},
												"on_click": {
													"type": "Clone",
													"name": "PopupScreenDefault",
													"attributes": {
														"title": "Prolog",
														"component_list": [
															{
																"type": "Clone",
																"name": "LayoutVerticalScrollable",
																"attributes": {
																	"component_list": [
																		{
																			"type": "Clone",
																			"name": "TextViewDetail",
																			"attributes": {
																				"text_size": "10",
																				"ssh_script_list": [
																					"var targetVid = eigenFragment.getIntegerVariable('TargetViewId')",
																					"var dir = '/data/data/com.termux/files/home/git-repos/eigenframe/cgi-bin' ",
																					"swipl_path = eigenFragment.getViewState(targetVid)",
																					"swipl_goal = eigenFragment.getViewState(976000) ",
																					"'cd '+dir+'; ruby ssh_swipl.rb \"'+swipl_path+'\" \"'+swipl_goal+'\"  '"
																				]
																			}
																		}
																	]
																}
															}
														]
													}
												}
											}
										},
										{
											"type": "Clone",
											"name": "HorizontalLine"
										},
										{
											"type": "Clone",
											"name": "EditTextLocalFileCache"
										}
									]
								}
							}
						]
					}
				}
			}
		},
		{
			"type": "Define",
			"name": "SetIsSourceButton",
			"component": {
				"type": "Switch",
				"id": 999300,
				"text": "Enable Source Button",
				"checked_script": "eigenFragment.getBooleanVariable('IsSourceButton', 0, true)",
				"text_color": "#ffffff",
				"background_color": "#654321",
				"icon": {
					"name": "pageview.",
					"location": "top"
				},
				"margin": {
					"left": 10,
					"top": 10,
					"right": 10,
					"bottom": 10
				},
				"padding": {
					"left": 30,
					"top": 30,
					"right": 30,
					"bottom": 30
				},
				"on_click": {
					"type": "JavaScript",
					"script_list": [
						"var b1 = eigenFragment.getViewState(999300) == 1",
						"eigenFragment.setBooleanVariable('IsSourceButton', 0, b1)",
						"eigenActivity.finish()",
						"eigenActivity.launch('file:///storage/emulated/0/Android/data/com.sawaya.eigenframe/files/app.json')"
					]
				}
			}
		},
		{
			"type": "JavaScript",
			"script": "eigenFragment.setCacheString('SelectFilePrompt', 0, 'Select File...')"
		},
		{
			"type": "Define",
			"name": "JavaScriptSetFullPath",
			"component": {
				"type": "JavaScript",
				"script_list": [
					"var home_dir = eigenFragment.getCacheString('SecureFtp:411000')",
					"var work_dir = eigenFragment.getCacheString('WorkingDirectory', 0, '')",
					"var selected_path = eigenFragment.getCacheString('SelectedPath', 0, '')",
					"var selected_file = eigenFragment.getCacheString('SelectedFile', 0, '')",
					"var full_path = eigenFragment.concatPaths(home_dir, work_dir, selected_path)",
					"eigenFragment.setCacheString('FullPath', full_path)",
					"var targetVid = eigenFragment.getIntegerVariable('TargetViewId')",
					"eigenFragment.setViewState(targetVid, full_path)"
				]
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenSelectFilePathRemote",
			"component": {
				"type": "Clone",
				"name": "PopupScreenDefault",
				"attributes": {
					"id": 991005,
					"title_script": "''+eigenFragment.getCacheString('SelectFilePrompt')",
					"url_script": "eigenFragment.getCacheString('RootUrl')+'frames/select-filepath-remote.json'"
				}
			}
		},
		{
			"type": "Define",
			"name": "SelectFilePathRemote",
			"component": {
				"type": "Clone",
				"name": "LayoutVerticalScrollable",
				"attributes": {
					"component_list": [
						{
							"type": "Clone",
							"name": "HorizontalLine"
						},
						{
							"type": "Clone",
							"name": "TextViewLabel",
							"attributes": {
								"text_script": "''+eigenFragment.getCacheString('SelectFilePrompt')"
							}
						},
						{
							"type": "Clone",
							"name": "ButtonDefault",
							"attributes": {
								"text_script": "''+eigenFragment.getCacheString('SelectFilePrompt')",
								"icon": {
									"name": "open_with.",
									"location": "top"
								},
								"on_click": {
									"type": "ActionList",
									"component_list": [
										{
											"type": "Clone",
											"name": "JavaScriptSetFullPath"
										},
										{
											"type": "JavaScript",
											"script_list": [
												"eigenFragment.setBooleanVariable('IsShowWorkingDirectory',0,true)",
												"eigenFragment.setBooleanVariable('IsShowCurrentFilename',0,true)"
											]
										},
										{
											"type": "Clone",
											"name": "PopupScreenSelectFilePathRemote"
										}
									]
								}
							}
						},
						{
							"type": "EditText",
							"id_script": "eigenFragment.getIntegerVariable('TargetViewId')",
							"max_length": 200,
							"is_single_line": true,
							"layout_width": "match_parent",
							"text_color": "#ffffff",
							"background_color": "#000000",
							"text": "undefined"
						},
						{
							"type": "Clone",
							"name": "HorizontalLine"
						}
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "EditTextPgpPassword6606",
			"component": {
				"type": "Clone",
				"name": "LayoutVerticalScrollable",
				"attributes": {
					"component_list": [
						{
							"type": "Clone",
							"name": "HorizontalLine"
						},
						{
							"type": "Clone",
							"name": "TextViewLabel",
							"attributes": {
								"text": "Private Key Passphrase:"
							}
						},
						{
							"type": "EditText",
							"id": 6606,
							"is_password": true,
							"layout_width": "match_parent",
							"layout_height": "wrap_content",
							"text_color": "#ffffff",
							"background_color": "#000000",
							"text": "password"
						},
						{
							"type": "Clone",
							"name": "HorizontalLine"
						}
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "ListViewPopupScreenAfterSecureFtpDirectory",
			"component": {
				"type": "SecureFtp",
				"id": 991004,
				"sftp_script": "'directory ' +  eigenFragment.getCacheString('FullPath')",
				"on_complete": {
					"type": "ActionList",
					"component_list": [
						{
							"type": "PopupTextView",
							"condition_script": "!eigenFragment.getCacheString('SecureFtp',991004,'') ",
							"title": "Warning",
							"font": "font/droid-sans-mono/DroidSansMono.ttf",
							"text_list": [
								"SecureShell (ssh) is not enabled.\n",
								"Open Termux, enter:  sshd"
							]
						},
						{
							"type": "PopupScreen",
							"condition_script": "!!eigenFragment.getCacheString('SecureFtp',991004,'') ",
							"layout_width": "match_parent",
							"layout_height": "wrap_content",
							"text_size": "14",
							"text_color": "#ffffff",
							"background_color": "#111111",
							"title_script": "''+eigenFragment.getCacheString('SelectFilePrompt')",
							"url_script": "eigenFragment.getCacheString('RootUrl')+'frames/explore-filesystem-listview.json'"
						}
					]
				}
			}
		},
		{
			"type": "Define",
			"name": "PopupScreenSelectFilePathLocal",
			"component": {
				"type": "Clone",
				"name": "PopupScreenDefault",
				"attributes": {
					"id": 991015,
					"title_script": "''+eigenFragment.getCacheString('SelectFilePromptLocal')",
					"url_script": "eigenFragment.getCacheString('RootUrl')+'frames/select-filepath-local.json'"
				}
			}
		},
		{
			"type": "Define",
			"name": "JavaScriptSetFullPathLocal",
			"component": {
				"type": "JavaScript",
				"script_list": [
					"var home_dir0 = '/storage/emulated/0/Android/data/com.sawaya.eigenframe' ",
					"var home_dir = '/data/data/com.sawaya.eigenframe' ",
					"var selected_path = eigenFragment.getCacheString('SelectedPathLocal', 0, '')",
					"var full_path = eigenFragment.concatPaths(home_dir, selected_path)",
					"eigenFragment.setCacheString('FullPathLocal', full_path)",
					"var targetVid = eigenFragment.getIntegerVariable('TargetViewId2')",
					"eigenFragment.setViewState(targetVid, full_path)"
				]
			}
		},
		{
			"type": "Define",
			"name": "ListViewPopupScreenAfterSecureFtpDirectoryLocal",
			"component": {
				"type": "SecureFtp",
				"id": 991014,
				"sftp_script": "'directory_local ' +  eigenFragment.getCacheString('FullPathLocal')",
				"on_complete": {
					"type": "ActionList",
					"component_list": [
						{
							"type": "PopupScreen",
							"layout_width": "match_parent",
							"layout_height": "wrap_content",
							"text_size": "14",
							"text_color": "#ffffff",
							"background_color": "#111111",
							"title_script": "''+eigenFragment.getCacheString('SelectFilePromptLocal')",
							"url_script": "eigenFragment.getCacheString('RootUrl')+'frames/explore-filesystem-listview-local.json'"
						}
					]
				}
			}
		}
	],
	"on_complete": {
		"type": "UrlRequest",
		"is_eigen_response": true,
		"url_script": "eigenFragment.getCacheString('RootUrl')+'frames/playlist.json'"
	}
}